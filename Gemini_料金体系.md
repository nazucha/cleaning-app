# Gemini API 料金体系（2025年）

## 概要
Google Gemini APIは、無料枠と有料プランの両方を提供しています。エアコン情報の取得には、**Gemini 2.0 Flash**または**Flash-Lite**モデルが推奨されます（コスト効率が高い）。

## 無料枠（Free Tier）

### 制限
- **リクエスト数**: 1,500リクエスト/日
- **リクエスト/分**: 5-15 RPM（モデルによって異なる）
  - Gemini 2.5 Pro: 5 RPM
  - Flash-Lite: 15 RPM
- **トークン/分**: 250,000 TPM（全モデル合計）
- **コンテキストウィンドウ**: 100万トークン

### 注意事項
- **クレジットカード不要**で無料枠を使用可能
- 無料枠を超えると、自動的に有料プランに移行（クレジットカード登録が必要）
- 日次クォータは太平洋標準時（PST）の午前0時にリセット

## 有料プラン（従量課金）

### 主要モデルの価格（100万トークンあたり）

#### Gemini 2.0 Flash（推奨）⭐
- **入力**: $0.10 / 1M トークン
- **出力**: $0.40 / 1M トークン
- **特徴**: コスト効率が高く、高速

#### Gemini 1.5 Pro
- **入力**: $1.25 / 1M トークン
- **出力**: $5.00 / 1M トークン
- **特徴**: より高度な推論能力

#### Gemini 3 Pro Preview
- **入力**: $2.00 / 1M トークン（プロンプト≤200kトークン）
- **出力**: $12.00 / 1M トークン（プロンプト≤200kトークン）
- **特徴**: 最新モデル、高コスト

### Batch API（50%割引）
- バッチ処理を使用すると、標準価格の**50%オフ**
- リアルタイム性が不要な場合に有効

## エアコン情報取得のコスト見積もり

### 1リクエストあたりのトークン数
- **プロンプト（入力）**: 約200-300トークン
- **レスポンス（出力）**: 約300-500トークン
- **合計**: 約500-800トークン/リクエスト

### コスト計算（Gemini 2.0 Flash使用時）

#### 無料枠内
- **1,500リクエスト/日**まで無料
- 1日あたり約75-120万トークンまで無料

#### 有料プラン（無料枠超過時）
- **1リクエストあたり**: 約$0.0004-0.0006（0.04-0.06円）
- **1,000リクエスト**: 約$0.4-0.6（約60-90円）
- **10,000リクエスト**: 約$4-6（約600-900円）

### 月間コスト見積もり

| リクエスト数/月 | 無料枠内 | 超過分のコスト（概算） |
|---------------|---------|---------------------|
| 1,000 | ✅ 無料 | - |
| 5,000 | ✅ 無料（1日あたり約167リクエスト） | - |
| 10,000 | ⚠️ 一部有料 | 約$2-3（約300-450円） |
| 50,000 | ⚠️ 有料 | 約$20-30（約3,000-4,500円） |
| 100,000 | ⚠️ 有料 | 約$40-60（約6,000-9,000円） |

**注意**: 1日あたり1,500リクエストを超えると有料になります。

## 使用量の目安

### エアコン情報取得の想定使用量
- **1件のエアコン情報取得**: 1リクエスト
- **1日あたりの想定使用量**: 
  - 少ない場合: 10-50リクエスト
  - 多い場合: 100-500リクエスト
  - 非常に多い場合: 1,000-1,500リクエスト（無料枠上限）

### 無料枠で十分な場合
- 1日あたり1,500件以下
- 月間で約45,000件以下（1日あたり1,500件として）

### 有料プランが必要な場合
- 1日あたり1,500件を超える
- より高速なレスポンスが必要
- より高度なモデルが必要

## 料金の最適化方法

1. **Gemini 2.0 Flashを使用**
   - 最もコスト効率が高い
   - エアコン情報取得には十分な性能

2. **ローカル判定を優先**
   - 現在の実装では、ローカル判定が最優先
   - ローカル判定で確定できる場合は、APIを呼ばない
   - これにより、APIコール数を大幅に削減可能

3. **Batch APIの活用**（将来の拡張）
   - リアルタイム性が不要な場合、Batch APIで50%割引

4. **キャッシングの実装**（将来の拡張）
   - 同じ型番のリクエストをキャッシュ
   - 重複リクエストを削減

## 現在の実装でのコスト

### ローカル判定が最優先
- **CS-A-0D2Zなどの主要型番**: APIを呼ばずに即座に結果を返す
- **APIコール数**: ローカル判定で確定できない型番のみ
- **推定コスト**: ほぼ無料（無料枠内で十分）

### Gemini APIを使用する場合
- ローカル判定で確定できない型番のみGemini APIを呼ぶ
- 1日あたりのAPIコール数: 想定10-100リクエスト程度
- **コスト**: 無料枠内で十分

## 参考リンク

- **公式料金ページ**: https://ai.google.dev/gemini-api/docs/pricing
- **レート制限**: https://ai.google.dev/gemini-api/docs/rate-limits
- **請求管理**: https://ai.google.dev/gemini-api/docs/billing

## まとめ

- **無料枠**: 1日あたり1,500リクエストまで無料
- **推奨モデル**: Gemini 2.0 Flash（$0.10/1M入力、$0.40/1M出力）
- **現在の実装**: ローカル判定を最優先するため、APIコール数は最小限
- **推定コスト**: ほぼ無料（無料枠内で十分）

現在の実装では、ローカル判定が最優先のため、APIコール数は最小限に抑えられ、**実質的に無料で使用可能**です。
